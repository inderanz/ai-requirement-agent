name: Mark uploaded on author confirm

on:
  issue_comment:
    types: [created]

permissions:
  issues: write

jobs:
  mark:
    if: >
      github.event.issue.user.login == github.event.comment.user.login &&
      contains(github.event.comment.body, 'Uploaded')
    runs-on: ubuntu-latest
    steps:
      - name: Add pdf:received label
        env:
          GH_TOKEN: ${{ github.token }}
        run: gh issue edit ${{ github.event.issue.number }} --add-label "pdf:received" || true
